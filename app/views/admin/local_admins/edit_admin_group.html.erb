<h1>New Slave Admin Group</h1>
<%=form_for @admin_group_owner ,:url=>update_admin_group_local_admin_path(@admin_group_owner) , :html => { :class => "form-horizontal",:multipart => true} do |f| %>
    <%= fields_for @admin_group do |ag| %>
        <%= fields_for @profile do |p| %>

            <% if @admin_group_owner.errors.any? || @profile.errors.any? || @admin_group.errors.any? %>
                <div id="error_explanation">
                  <h2><%= pluralize(@admin_group_owner.errors.count + @profile.errors.count + @admin_group.errors.count , "error") %> prohibited this Admin Group from being saved:</h2>

                  <ul>
                    <% @admin_group_owner.errors.full_messages.each do |msg| %>
                        <li><%= msg %></li>
                    <% end %>
                    <% @admin_group.errors.full_messages.each do |msg| %>
                        <li><%= msg %></li>
                    <% end %>
                    <% @profile.errors.full_messages.each do |msg| %>
                        <li><%= msg %></li>
                    <% end %>
                  </ul>
                </div>
            <% end %>
            <div class="control-group">
              <label class="control-label" for="input01">AG Owner: </label>
              <div class="controls">
                <%=@profile.first_name%> &nbsp <%=@profile.last_name%> &nbsp &nbsp  <%=@admin_group_owner.email%>
                <!--<input type="text" class="input-xlarge" id="input01">-->
                <p class="help-block"> </p>
              </div>
            </div>

            <h3>AG Group Details</h3>



            <div class="control-group">
              <label class="control-label" for="input01">Admin Group Name: <span style="color:red"> *</span></label>
              <div class="controls">
                <%=ag.text_field :name,:class=>"input"%>
                <!--<input type="text" class="input-xlarge" id="input01">-->
                <p class="help-block"></p>
              </div>
            </div>

            <div class="control-group">
              <label class="control-label" for="input01"> Admin Group Description: <span style="color:red"> </span></label>
              <div class="controls">
                <%=ag.text_field :description,:class=>"input"%>
                <!--<input type="text" class="input-xlarge" id="input01">-->
                <p class="help-block"></p>
              </div>
            </div>

            <div class="control-group">
              <label class="control-label" for="input01">AG country: <span style="color:red"> *</span></label>
              <div class="controls">
                <%=ag.autocomplete_field :ag_country ,autocomplete_country_detail_name_local_admins_path,:class=>"input"%>
                <!--<input type="text" class="input-xlarge" id="input01">-->
                <p class="help-block"></p>
              </div>
            </div>

            <div class="control-group">
              <td><label class="control-label" for="input01">AG Language: <span style="color:red"> </span></label></td>
              <div class="controls">
                <%=ag.autocomplete_field :language ,autocomplete_language_name_local_admins_path ,:class=>"input"%>
                <!--<input type="text" class="input-xlarge" id="input01">-->
                <p class="help-block"></p>
              </div>
            </div>
            <div class="control-group">
              <label class="control-label" for="input01"> Admin Group Email: <span style="color:red"> </span></label>
              <div class="controls">
                <%=ag.text_field :ag_email,:class=>"input"%>
                <!--<input type="text" class="input-xlarge" id="input01">-->
                <p class="help-block"></p>
              </div>
            </div>

            <h3>AG Organization Details</h3>

            <div class="control-group">
              <label class="control-label" for="input01"><%= label_tag "first_name: "%><span style="color:red"> </span></label>
              <div class="controls">
                <%= l.text_field :first_name,:class=>"input" %>
                <!--<input type="text" class="input-xlarge" id="input01">-->
                <p class="help-block"></p>
              </div>
            </div>

            <div class="control-group">
              <label class="control-label" for="input01"><%= label_tag "last_name: "%><span style="color:red"> </span></label>
              <div class="controls">
                <%= l.text_field :last_name,:class=>"input" %>
                <!--<input type="text" class="input-xlarge" id="input01">-->
                <p class="help-block"></p>
              </div>
            </div>

            <div class="control-group">
              <label class="control-label" for="input01">Company Name: <span style="color:red"> </span></label>
              <div class="controls">
                <%=ag.text_field :company_name,:class=>"input"%>
                <!--<input type="text" class="input-xlarge" id="input01">-->
                <p class="help-block"></p>
              </div>
            </div>
            <div class="control-group">
              <label class="control-label" for="input01">Country: <span style="color:red"> </span></label>
              <div class="controls">
                <%=ag.autocomplete_field :country ,autocomplete_country_detail_name_local_admins_path,:class=>"input"%>
                <!--<input type="text" class="input-xlarge" id="input01">-->
                <p class="help-block"></p>
              </div>
            </div>

            <div class="control-group">
              <label class="control-label" for="input01">City: <span style="color:red"> </span></label>
              <div class="controls">
                <%=ag.text_field :city,:class=>"input"%>
                <!--<input type="text" class="input-xlarge" id="input01">-->
                <p class="help-block"></p>
              </div>
            </div>

            <div class="control-group">
              <label class="control-label" for="input01">ZipCode: <span style="color:red"> </span></label>
              <div class="controls">
                <%=ag.text_field :zip_code,:class=>"input"%>
                <!--<input type="text" class="input-xlarge" id="input01">-->
                <p class="help-block"></p>
              </div>
            </div>

            <div class="control-group">
              <label class="control-label" for="input01">State: <span style="color:red"> </span></label>
              <div class="controls">
                <%=ag.text_field :state,:class=>"input"%>
                <!--<input type="text" class="input-xlarge" id="input01">-->
                <p class="help-block"></p>
              </div>
            </div>

            <div class="control-group">
              <label class="control-label" for="input01">Address: <span style="color:red"> </span></label>
              <div class="controls">
                <%=ag.text_field :address,:class=>"input"%>
                <!--<input type="text" class="input-xlarge" id="input01">-->
                <p class="help-block"></p>
              </div>
            </div>

            <div class="control-group">
              <label class="control-label" for="input01">Additional_address: <span style="color:red"> </span></label>
              <div class="controls">
                <%=ag.text_field :additional_address,:class=>"input"%>
                <!--<input type="text" class="input-xlarge" id="input01">-->
                <p class="help-block"></p>
              </div>
            </div>

            <div class="control-group">
              <label class="control-label" for="input01">Phone Number: <span style="color:red"> </span></label>
              <div class="controls">
                <%=ag.text_field :phone_number,:class=>"input"%>
                <!--<input type="text" class="input-xlarge" id="input01">-->
                <p class="help-block"></p>
              </div>
            </div>

            <div class="control-group">
              <label class="control-label" for="input01">Product: <span style="color:red"> </span></label>
              <div class="controls">
                <%= @product.platform_product_name%>
                <!--<input type="text" class="input-xlarge" id="input01">-->
                <p class="help-block"></p>
              </div>
            </div>

            <div id= "products_details">
              <h3>Product Details</h3>
              <div class="control-group">
                <label class="control-label" for="input01">BG private Allowed:</label>
                <div class="controls">
                  <%=@product.bg_private%>
                  <!--<input type="text" class="input-xlarge" id="input01">-->
                  <p class="help-block"></p>
                </div>
              </div>
              <div class="control-group">
                <label class="control-label" for="input01">Number of BG Windows Allowed:</label>
                <div class="controls">
                  <%=@product.get_window_number%>
                  <!--<input type="text" class="input-xlarge" id="input01">-->
                  <p class="help-block"></p>
                </div>
              </div>

              <div class="control-group">
                <label class="control-label" for="input01">Number of BG Contest Allowed:</label>
                <div class="controls">
                  <%=@product.get_contest_number%>
                  <!--<input type="text" class="input-xlarge" id="input01">-->
                  <p class="help-block"></p>
                </div>
              </div>

              <div class="control-group">
                <label class="control-label" for="input01">Number of Active Workers Allowed:</label>
                <div class="controls">
                  <%=@product.get_ag_workers_number%>
                  <!--<input type="text" class="input-xlarge" id="input01">-->
                  <p class="help-block"></p>
                </div>
              </div>

              <div class="control-group">
                <label class="control-label" for="input01">BG Custom Commissions Allowed:</label>
                <div class="controls">
                  <%=@product.ag_custom_commissions%>
                  <!--<input type="text" class="input-xlarge" id="input01">-->
                  <p class="help-block"></p>
                </div>
              </div>



              <div class="control-group">
                <label class="control-label" for="input01">Bg Custom Funding Recepient:</label>
                <div class="controls">
                  <%=@product.ag_recepient_settings%>
                  <!--<input type="text" class="input-xlarge" id="input01">-->
                  <p class="help-block"></p>
                </div>
              </div>

              <div class="control-group">
                <label class="control-label" for="input01">Custom PaymentGateway Payer Allowed:</label>
                <div class="controls">
                  <%=@product.ag_payment_gateway_commissions_payer_settings%>
                  <!--<input type="text" class="input-xlarge" id="input01">-->
                  <p class="help-block"></p>
                </div>
              </div>

            </div>
            <h3>Special Settings and Promotions</h3>

            <div class="control-group">
              <label class="control-label" for="input01">BG Free Standard Commissions Allowed:<span style="color:red"> </span></label>
              <div class="controls">
                <%= ag.radio_button :bg_free_standard_commissions_allowed, true,:class=>"input"%>  True   </div>
              <div class="controls"> <%=ag.radio_button :bg_free_standard_commissions_allowed, false,:class=>"input"%> false  </div>
              <!--<input type="text" class="input-xlarge" id="input01">-->
              <p class="help-block"></p>
            </div>

            <div class="control-group">
              <label class="control-label" for="input01">BG Free pro Commissions Allowed:<span style="color:red"> </span></label>
              <div class="controls">
                <%= ag.radio_button :bg_free_pro_commissions_allowed, true,:class=>"input"%>  True   </div>
              <div class="controls"> <%=ag.radio_button :bg_free_pro_commissions_allowed, false,:class=>"input"%> false  </div>
              <!--<input type="text" class="input-xlarge" id="input01">-->
              <p class="help-block"></p>
            </div>

            <div class="control-group">
              <label class="control-label" for="input01">BG Free Private Commissions Allowed:<span style="color:red"> </span></label>
              <div class="controls">
                <%= ag.radio_button :bg_free_private_commissions_allowed, true,:class=>"input"%>  True   </div>
              <div class="controls"> <%=ag.radio_button :bg_free_private_commissions_allowed, false,:class=>"input"%> false  </div>
              <!--<input type="text" class="input-xlarge" id="input01">-->
              <p class="help-block"></p>
            </div>

            <div class="control-group">
              <label class="control-label" for="input01">Free Subscription: <span style="color:red"> </span></label>
              <div class="controls">
                <%=ag.select :free_subscription,options_for_select(["No", "Temporary" ,"Permanent"]) ,:class=>"input"%>
                <!--<input type="text" class="input-xlarge" id="input01">-->
                <p class="help-block"></p>
              </div>
            </div>

            <div class="control-group">
              <label class="control-label" for="input01">Free PaaS Expiration Date <span style="color:red"></span></label>
              <div class="controls">
                <%= ag.datepicker :free_paas_expiration_date%>
                <!--<input type="text" class="input-xlarge" id="input01">-->
                <p class="help-block"></p>
              </div>
            </div>

            <div class="form-actions">
              <%= f.submit "Create Local Admin",:class =>"btn btn-primary"  %>
              <a class="btn" href="/">Cancel</a>
              <!--<input type="text" class="input-xlarge"  id="input01">-->
            </div>

        <%end%>
    <%end%>
<%end%>

<%= content_for :head do  %>
    <script type="text/javascript">

        jQuery(function(){

            $("#check").click(function(event){
                event.preventDefault();
                var email = $("#user_email").val()
                $.get("/local_admins/check_for_existing_user_for_ag",{"email" :email},function(k){}
                )
            });

//            $("#product").change(function(){
//                var  product = $("#product").val()
//                $.get("/local_admins/get_product_details",{"product" :product},function(k){}
//                )
//
//            });

//            var email = new LiveValidation('user_email',{validMessage:" ",onlyOnSubmit:true});
//            email.add( Validate.Email);
//            email.add(Validate.Presence)

            var group_name = new LiveValidation('admin_group_name',{validMessage:" ",onlyOnSubmit:true});

            group_name.add(Validate.Presence)

            var group_email = new LiveValidation('admin_group_ag_email',{validMessage:" ",onlyOnSubmit:true});

            group_email.add(Validate.Presence)
            group_email.add( Validate.Email);

            var telephone_number = new LiveValidation("admin_group_phone_number",{validMessage:" ",onlyOnSubmit:true});
            telephone_number.add( Validate.Format , { pattern: /[+][0-9]{2} [0-9]{10}/g, failureMessage: "Must be in form +xx xxxxxxxxxx" });


        });
    </script>
<% end %>
